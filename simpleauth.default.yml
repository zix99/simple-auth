production: false
verbose: false
staticfromdisk: false
include: ['simpleauth.yml']

# Metadata is fed into the `tmpl` files to be rendered
metadata:
    company: "My Company"
    footer: ""
    bucket: {} # Not used by default. Can be used to customize
web:
    host: "0.0.0.0:9002" # The host and port the server (API & Web) listens on
    prometheus: false    # If true, will enable /metrics endpoint (Must be compiled with prometheus support)
    swagger: false       # If true, enables the swagger UI and docs endpoint at /swagger (Must be compiled with swagger support)
    tls:
        enabled: false
        # AutoTLS (and cache) are used to leverage LetsEncrypt to acquire certificate
        # Needs to be internet-facing to work
        auto: true
        cache: ./

    # Requirements inform server and client of any form requirements
    requirements:
        usernameregex: '^[a-z][a-z0-9.]+$'
        passwordminlength: 3
        passwordmaxlength: 30
        usernameminlength: 5
        usernamemaxlength: 20
        emailvalidationrequired: false  # If email validation is required before login

    login:
        settings:
            createaccountenabled: true      # If allowed to create account
            routeonlogin: null              # Where to route to post-login (either login or create)
            allowedcontinueurls: []         # Urls, in addition to local pages, allowed post-login via ?continue query param
            throttleduration: 1s
        cookie:
            jwt:
                # Key for jwt-signing
                signingmethod: "hs256"
                signingkey: ""
                issuer: "simple-auth"
                expiresminutes: 30
            name: "auth"
            path: /
            secureonly: false
            httponly: true
        oidc: []
        onetime:
            enabled: true
            allowforgotpassword: true # If allowed to issue forgot-password email.  Required email config
            tokenduration: 1h
        # Two-factor auth 2FA / TOTP
        twofactor:
            enabled: false
            keylength: 12
            drift: 2
            issuer: "simple-auth"

    gateway:
        enabled: false
        logoutpath: "/logout"
        targets: []

    # Enable or disable recaptchav2
    recaptchav2:
        enabled: false
        sitekey: null    # site key from google
        secret: null     # Secret key from google
        theme: 'light'   # light or dark
email:
    engine: noop
    from: null
    smtp:
        host: ''
        identity: null
        username: null
        password: null
authenticators:
    token:
        enabled: true
        sessionexpiresminutes: 720 # 12 hours
        verificationexpiresseconds: 15
    simple:
        enabled: true
        sharedsecret: "your-super-secret-token"
    vouch:
        enabled: true
api:
    external: false
    sharedsecret: ""
    throttleduration: 1s
db:
    driver: "sqlite3"
    url: "simpleauth.db"
